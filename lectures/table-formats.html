<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Class summary: Table Organization</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="notes.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Class summary:<span class="mywbr"> &nbsp;</span> Table Organization</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.A_.Recap_on_.Nested_.Functions%29" class="tocviewlink" data-pltdoc="x">A Recap on Nested Functions</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Organizing_.Tables_to_.Tasks%29" class="tocviewlink" data-pltdoc="x">Organizing Tables to Tasks</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Class_summary__.Table_.Organization%29" class="tocsubseclink" data-pltdoc="x">Class summary:<span class="mywbr"> &nbsp;</span> Table Organization</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.A_.Recap_on_.Nested_.Functions%29" class="tocsubseclink" data-pltdoc="x">A Recap on Nested Functions</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Anonymous_.Functions__lambda_%29" class="tocsubseclink" data-pltdoc="x">Anonymous Functions (lambda)</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Organizing_.Tables_to_.Tasks%29" class="tocsubseclink" data-pltdoc="x">Organizing Tables to Tasks</a></td></tr><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._.Takeaways%29" class="tocsubseclink" data-pltdoc="x">Takeaways</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><h2><a name="(part._.Class_summary__.Table_.Organization)"></a>Class summary: Table Organization</h2><p>Copyright (c) 2017 Kathi Fisler</p><h3>1<tt>&nbsp;</tt><a name="(part._.A_.Recap_on_.Nested_.Functions)"></a>A Recap on Nested Functions</h3><p>There were some lingering questions from the last lecture about nested
functions, especially for use with table functions.  We started with a
review, using the following example.</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun filter-by-discount(t :: Table, d :: String) -&gt; Table:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">doc: "filter table to rows with given discount"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun has-discount(r :: Row) -&gt; Boolean:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">r["discount"] == d</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">filter-by(t, has-discount)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">student-tickets =</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">sum(filter-by-discount(event-data, "student"),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"tickcount")</span></p></td></tr></table></p><p>We went through a justification of why <span class="stt">has-discount</span> needs to
be nested within <span class="stt">filter-by-discount</span>.  We also reviewed how the
call to <span class="stt">filter-by-discount</span> works, showing how <span class="stt">d</span> gets its
value, then how <span class="stt">has-discount</span> gets used on the table rows.</p><p>Lecture capture shows both explanations.  We have also summarized them
in an animated <a href="nested-functions-animation.pptx">Powerpoint document</a> [<a href="nested-functions-animation.pdf">PDF version</a>].</p><h4>1.1<tt>&nbsp;</tt><a name="(part._.Anonymous_.Functions__lambda_)"></a>Anonymous Functions (lambda)</h4><p>If you are getting comfortable writing <span class="stt">filter-by</span> and
<span class="stt">build-column</span> expressions, you may be getting tired of having to
write out the nested functions all the time.  If you are ready for a
shorthand, this section is for you (if you aren&rsquo;t ready for this yet,
that&rsquo;s also fine).</p><p>Notice how in <span class="stt">filter-by-discount</span> the function
<span class="stt">has-discount</span> is somewhat temporary &ndash; we create it just so we
can give it as the argument to <span class="stt">filter-by</span>. We aren&rsquo;t planning to
use the name again writing the <span class="stt">filter-by</span> call.</p><p>For situations such as these, Pyret provides the ability to define
<span style="font-style: italic">anonymous functions</span> &ndash; functions with arguments and bodies, but
no names.  Here&rsquo;s how the same code appears written with an anonymous
function instead:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun filter-by-discount(t :: Table, d :: String) -&gt; Table:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">doc: "filter table to rows with given discount"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">filter-by(t, lam(r): r["discount"] == d end)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></p><p><span class="stt">lam</span> (short for the greek letter lambda, which is used for
functions in the mathematical foundations of programming languages)
says "make an anonymous function". The function still takes the same
parameters, and still has the same body, as well as the <span class="stt">end</span>
marker. But the name has been stripped off.</p><p>We have also stripped off the types (though we could have included
them).  Why?  Because we tend to use anonymous functions in very
localized situations like this where the types are easy to see from
usage context (i.e., we know that <span class="stt">filter-by</span> function arguments
take a Row and return a Boolean.</p><p>You are welcome to use <span class="stt">lam</span> functions or not, as you see fit. If
you&rsquo;re comfortable with them, they do make your code tighter.  But
it&rsquo;s also fine to continue to use named functions, as the idea of
anonymous functions can be a bit abstract at first.</p><h3>2<tt>&nbsp;</tt><a name="(part._.Organizing_.Tables_to_.Tasks)"></a>Organizing Tables to Tasks</h3><p>We began by looking at a <a href="https://docs.google.com/spreadsheets/d/1iDzaOVWRD80tTffbKGNBNjLpmdrB1WUpiG6TwHC3TKA/">Google Sheet</a> with data bout the regional demographics of recent
Brown entering classes. This data comes from <a href="https://www.brown.edu/about/administration/institutional-research/factbook/undergraduate-admission-and-financial-aid">Brown Admissions Factbook</a>, First-Year Class Geographic Profile (the
overall factbook has a lot of data on Brown&rsquo;s student and employee
populations).</p><p>Here are some questions we might want to ask about this data?</p><ul><li><p>Which region has had the largest range of population over the
last four years?</p></li><li><p>What percentage of the class is from a particular region in a
given year?</p></li><li><p>What percentage of the total student body (first-years through
seniors) in a given year is from a particular region?</p></li></ul><p>We asked about the types of charts and plots made the most sense for
each of these three questions.  We also asked what organization of the
data would be best suited to generating each of those charts. As a
reminder, the available charts are listed in the tables-functions
documentation page.</p><p>We generally concluded that</p><ul><li><p>The first question calls for a box-plot. Generating that needs a
version of the table rows for years and regions for columns.</p></li><li><p>The second question calls for a pie chart, which we can generate
with existing columns.</p></li><li><p>The third question also calls for a pie chart, but the table
needs an additional column that sums data from the years to be
included in the aggregate.</p></li></ul><h4>2.1<tt>&nbsp;</tt><a name="(part._.Takeaways)"></a>Takeaways</h4><ul><li><p>Any data-oriented problem that you work on has a collection of
<span style="font-style: italic">variables</span>, which represent information about a series of
<span style="font-style: italic">observations</span>.</p></li><li><p>Typically, software tools that process data expect that you have
a column for each variable and a row for each observation.</p></li><li><p>Many variables have <span style="font-style: italic">ranges of values</span> which might be
important in your analysis. This raises a question of whether you
should have a column tracking the range or a separate column for each
range. Which one you want depends on the analysis question you are
asking, and what inputs your plotting operations expects (i.e., an entire
column versus some sort of range specification).</p></li></ul><div class="csTip"><p><span style="font-weight: bold">Key idea in CS</span>: Being able to choose a table organization based on your analysis
questions is a key skill in data science. Identifying manipulations
that would properly reformat a table is a skill from computer
science. Actually using code to reformat a table from one organization
to another is a skill from programming.</p></div><p>In short, the course is starting to move from learning mechanics to
really bringing our topics together to work on problems that arise in
real analysis contexts.  Let the fun begin!</p></div></div><div id="contextindicator">&nbsp;</div></body></html>