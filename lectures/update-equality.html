<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Class summary: Updating Data and Data Equality</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Class summary:<span class="mywbr"> &nbsp;</span> Updating Data and Data Equality</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Updating_.Data__.Revising_.Due_.Dates%29" class="tocviewlink" data-pltdoc="x">Updating Data:<span class="mywbr"> &nbsp;</span> Revising Due Dates</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.When_are_.To.Do.Items_.Equal_%29" class="tocviewlink" data-pltdoc="x">When are <span class="stt">To<span class="mywbr"> &nbsp;</span>Do<span class="mywbr"> &nbsp;</span>Items</span> Equal?</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Class_summary__.Updating_.Data_and_.Data_.Equality%29" class="tocsubseclink" data-pltdoc="x">Class summary:<span class="mywbr"> &nbsp;</span> Updating Data and Data Equality</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Updating_.Data__.Revising_.Due_.Dates%29" class="tocsubseclink" data-pltdoc="x">Updating Data:<span class="mywbr"> &nbsp;</span> Revising Due Dates</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.An_.Update_.Function%29" class="tocsubseclink" data-pltdoc="x">An Update Function</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.When_are_.To.Do.Items_.Equal_%29" class="tocsubseclink" data-pltdoc="x">When are <span class="stt">To<span class="mywbr"> &nbsp;</span>Do<span class="mywbr"> &nbsp;</span>Items</span> Equal?</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><h2><a name="(part._.Class_summary__.Updating_.Data_and_.Data_.Equality)"></a>Class summary: Updating Data and Data Equality</h2><p>Copyright (c) 2017 Kathi Fisler</p><p>Let&rsquo;s start again with our to-do list setup from last week:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@dataclass</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">class ToDoItem:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">descr : str</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">due : date</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">tags : list</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">milk_item = ToDoItem("buy milk", date(2018, 7, 27), ["shopping", "home"])</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">grading_item = ToDoItem("grade hwk", date(2018, 7, 28), ["teaching"])</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">paper_item = ToDoItem("meet students", date(2018, 7, 26), ["research"])</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">todo_list = [grading_item, milk_item, paper_item]</span></p></td></tr></table></p><p>We have already seen how to add and remove items from our todolist.
What if we want to update the due date of an item?</p><h3>1<tt>&nbsp;</tt><a name="(part._.Updating_.Data__.Revising_.Due_.Dates)"></a>Updating Data: Revising Due Dates</h3><p>In Python, we update a field of a dataclass by using = to give a new
value to the field within the value.  For example:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">milk_item.due = date(11, 15, 2018)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">paper_item.descr = "meet Jack"</span></p></td></tr></table></p><p>Once we do this, the original value is gone, replaced by the new
value. We can see this by accessing the field, or by looking in the
dictionary window in Pycharm:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">print(milk_item.due)</span></p></td></tr></table></p><p>What if we now look at the entire todo_list? Will <span class="stt">milk_item</span>
have the original or the new date?  The new one.  We modified
<span class="stt">milk_item</span>, which was in the list.</p><h4>1.1<tt>&nbsp;</tt><a name="(part._.An_.Update_.Function)"></a>An Update Function</h4><p>Let&rsquo;s now write a function to update the date in a ToDoItem.</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">def update_duedate(forItem : ToDoItem, new_date : date):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"""change due date on given item to the new date"""</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">forItem.due = new_date</span></p></td></tr></table></p><p>What would the test for this look like?</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">def test_update():</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">item1 = ToDoItem("register", date(11, 9, 2018), ["school"])</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">test("item1 check", update_duedate(item1, date(11, 15, 2018)), ???)</span></p></td></tr></table></p><p>How can we fill in the ??? here?  <span class="stt">update_duedate</span> returns
<span class="stt">None</span>, so what is there to test?</p><p>In this case, we have to do the update on a separate line, then test
that the value in the <span class="stt">due</span> field changed.  We should also test
that the others fields did <span style="font-weight: bold">not</span> change.</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">def test_update():</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">item1 = ToDoItem("register", date(2018, 11, 9), ["school"])</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">update_duedate(item1, date(2018, 11, 15))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">test("due check", item1.due, date(2018, 11, 15))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">test("descr check", item1.descr, "register")</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">test("tags check", item1.tags,</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">["school"])</span></p></td></tr></table></p><p>Hmm, should we perhaps have had <span class="stt">update_duedate</span> return the item,
so we could test it more directly?</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">def test_update():</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">item2 = ToDoItem("register", date(2018, 11, 9), ["school"])</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">test("item1 check", update_duedate(item2, date(2018, 11, 15)),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">ToDoItem("register", date(2018, 11, 15), ["school"]))</span></p></td></tr></table></p><p>It isn&rsquo;t clear that this version is nicer to write, and if the test
fails, it&rsquo;s harder to track down what went wrong. Testing larger data
piecemeal (as we did by testing each field separately) can make
working with testing output more manageable.</p><h3>2<tt>&nbsp;</tt><a name="(part._.When_are_.To.Do.Items_.Equal_)"></a>When are <span class="stt">ToDoItems</span> Equal?</h3><p>You have a very important phone call to make, so you made multiple
todo items for it to make sure you don&rsquo;t miss it (by the third one,
you were tired of typing and just reused the earlier one).</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">call1 = ToDoItem("call fred", date(2018, 11, 15), ["urgent"])</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">call2 = ToDoItem("call fred", date(2018, 11, 15), ["urgent"])</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">call3 = call1</span></p></td></tr></table></p><p><span style="font-weight: bold">What will the dictionary look like for this?</span></p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">call1 --&gt; ToDoItem("call fred", date(2018, 11, 15), ["urgent"])</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">call2 --&gt; ToDoItem("call fred", date(2018, 11, 15), ["urgent"])</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">call3 --&gt; ToDoItem("call fred", date(2018, 11, 15), ["urgent"])</span></p></td></tr></table></p><p>We can ask Python which of these values are the same, using ==. For
example:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt;&gt;&gt; call1 == call3</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">True</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt;&gt;&gt; call2 == call1</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">True</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt;&gt;&gt; call3 == call1</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">True</span></p></td></tr></table></p><p>This works because == asks whether two expressions have the same
contents.</p><p>Now, let&rsquo;s update the date on <span class="stt">call1</span> to <span class="stt">date(2018, 11,
13)</span>. What should change?  Certainly <span class="stt">call1</span>, but what about
<span class="stt">call2</span> and <span class="stt">call3</span>?</p><p><span class="stt">call3</span> changes, but not <span class="stt">call2</span>. Here&rsquo;s the new dictionary.</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">call1 --&gt; ToDoItem("call fred", date(2018, 11, 13), ["urgent"])</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">call2 --&gt; ToDoItem("call fred", date(2018, 11, 15), ["urgent"])</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">call3 --&gt; ToDoItem("call fred", date(2018, 11, 13), ["urgent"])</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">call4 --&gt; ToDoItem("call fred", date(2018, 11, 15), ["urgent"])</span></p></td></tr></table></p><p>This makes some intuitive sense &ndash; we said <span class="stt">call3</span> was
<span class="stt">call1</span>, but nothing in our code connected <span class="stt">call2</span> to either
<span class="stt">call1</span> or <span class="stt">call3</span>.</p><p>But it raises a question: what does equality mean?  We checked before
that all of these items were "the same" via ==, but changes to
<span class="stt">call1</span> affect the others differently.</p><p>Just to make these clear, let&rsquo;s add another call:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">call4 = ToDoItem("call fred", date(2018, 11, 15), ["urgent"])</span></p></td></tr></table></p><p>Now, <span class="stt">call4 == call2</span>, but if we change <span class="stt">call2</span>, we don&rsquo;t
expect <span class="stt">call2</span> to change (because nothing in the code ties them
together, as happens for <span class="stt">call1</span> and <span class="stt">call3</span>).</p><p>What we are seeing here is that there are two different kinds of
"equality" relationships that can exist between two names:</p><ul><li><p>Contents are the same, and changes to one result in changes to the other (<span class="stt">call1</span> and <span class="stt">call3</span>)</p></li><li><p>Contents are the same, but changes to one do not affect the other (<span class="stt">call1</span> and <span class="stt">call3</span>)</p></li></ul><p>The == operation that we have used so far returns <span class="stt">True</span> for both
relationships. If we want to tell the two relationships apart in code,
we use a different comparison operator, called <span class="stt">is</span>:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt;&gt;&gt; call1 is call3</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">True</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt;&gt;&gt; call2 is call4</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">False</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt;&gt;&gt; call2 == call4</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">True</span></p></td></tr></table></p><p>Both <span class="stt">is</span> and <span class="stt">==</span> are symmetric relationships: changes to
either <span class="stt">call3</span> or <span class="stt">call1</span> changes the other.</p><p><span style="font-weight: bold">But how does the difference between these two kinds of equality
show up in the dictionary?</span></p><p>The dictionary lets you see == relationships, but it seems to be
missing the is-relationship between <span class="stt">call1</span> and
<span class="stt">call3</span>. Doesn&rsquo;t it?</p><p>Yep, which is a motivation to come back next class ...</p></div></div><div id="contextindicator">&nbsp;</div></body></html>