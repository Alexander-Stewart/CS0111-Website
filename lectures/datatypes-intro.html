<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Class summary: Introduction to Datatypes</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="notes.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Class summary:<span class="mywbr"> &nbsp;</span> Introduction to Datatypes</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.A_.Data-.Design_.Exercise%29" class="tocviewlink" data-pltdoc="x">A Data-<wbr></wbr>Design Exercise</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.User-.Defined_.Datatypes%29" class="tocviewlink" data-pltdoc="x">User-<wbr></wbr>Defined Datatypes</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Class_summary__.Introduction_to_.Datatypes%29" class="tocsubseclink" data-pltdoc="x">Class summary:<span class="mywbr"> &nbsp;</span> Introduction to Datatypes</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.A_.Data-.Design_.Exercise%29" class="tocsubseclink" data-pltdoc="x">A Data-<wbr></wbr>Design Exercise</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.User-.Defined_.Datatypes%29" class="tocsubseclink" data-pltdoc="x">User-<wbr></wbr>Defined Datatypes</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><h2><a name="(part._.Class_summary__.Introduction_to_.Datatypes)"></a>Class summary: Introduction to Datatypes</h2><p>Copyright (c) 2017 Kathi Fisler</p><h3>1<tt>&nbsp;</tt><a name="(part._.A_.Data-.Design_.Exercise)"></a>A Data-Design Exercise</h3><div class="activity"><p>Imagine that you are writing an email system, and want to be able to
study usage patterns over the course of a week.  You don&rsquo;t want to
study contents of messages (for privacy sake), so you&rsquo;ll just need to
store the so-called "meta-data" (the "who and when" information).</p><p>Specifically, each email has a sender, one or more recipients, the
day of the week that it was sent ("Mon", etc), and the time (hours
and mins) that it was sent.  What combination of lists and tables
would you create to hold this data?</p></div><p>After discussion, students generally agreed that this needed a table.
A list-of-lists would also have worked, though the table makes it
easier to extract individual columns.  The table also makes it easier
to spot missing entries.</p><p><div class="SIntrapara">Let&rsquo;s go with a table. Pretty much all proposals included the following three columns:
</div><div class="SIntrapara"><ul><li><p>sender column (String)</p></li><li><p>recipients column (List&lt;String&gt;)</p></li><li><p>day column (String)</p></li></ul></div></p><p>Handling time was more interesting though.  Ideas here include:</p><ul><li><p>a single number with decimals for hours</p></li><li><p>a single numbers of minutes since midnight</p></li><li><p>a 4-digit number that uses 24-hour time like 1830</p></li><li><p>a string like "4:25 pm"</p></li><li><p>two columns, one for hour and one for minutes</p></li><li><p>a column with a list of two numbers (hour and min)</p></li></ul><p>Separating hours from mins seems useful if we have to do any numeric
computations on the times (sorting, for example). The two-columns version
is nice because we can access the time components by name.  The list
version is nice because it treats time as a single, cohesive piece of data.
Which to choose?</p><p>You don&rsquo;t have to choose.  You just need a new concept &ndash; creating
your own datatypes!</p><h3>2<tt>&nbsp;</tt><a name="(part._.User-.Defined_.Datatypes)"></a>User-Defined Datatypes</h3><p>Pyret (indeed, most languages) give you a way to define your own types
of data.  Here, we will define a new type called <span class="stt">TimeData</span>,
where a value of this type has two components &ndash; hours and mins (we&rsquo;re
assuming 24-hour time).</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">data TimeData:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| time(hours :: Number, mins :: Number)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></p><p>Here,</p><ul><li><p><span class="stt">TimeData</span> is a new _type_ name (akin to <span class="stt">String</span>,
<span class="stt">Boolean</span>, etc)</p></li><li><p><span class="stt">time</span> is a function that creates <span class="stt">TimeData</span> values.
Such functions that build data are called <span style="font-style: italic">constructors</span>.</p></li><li><p><span class="stt">hours</span> and <span class="stt">mins</span> are names of the parts of a piece
of time data.</p></li></ul><p>Here are examples of creating <span class="stt">TimeData</span> values:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">noon = time(12, 0)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">5pm = time(19, 0)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">messages =</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">table: sender :: String, recipients :: List&lt;String&gt;,</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">day :: String, time :: TimeData</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">row: "kathi", [list: "eli"], "Monday", time(8, 30)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></p><p>Finally, here&rsquo;s a function that computes over <span class="stt">TimeData</span> &ndash; we can use
the . notation and the name of a component to get out a piece of the
data value.</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun before-noon(t : TimeData) -&gt; Boolean:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">doc: "is this time before noon"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">t.hours &lt; 12</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">where:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">before-noon(noon) is false</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">before-noon(5pm) is false</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">before-noon(11, 59) is true</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></p></div></div><div id="contextindicator">&nbsp;</div></body></html>