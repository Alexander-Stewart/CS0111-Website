<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Introduction to Functions</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Introduction to Functions</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Repeated_.Computations__.Flags_.Example%29" class="tocviewlink" data-pltdoc="x">Repeated Computations:<span class="mywbr"> &nbsp;</span> Flags Example</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Defining_.Your_.Own_.Functions%29" class="tocviewlink" data-pltdoc="x">Defining Your Own Functions</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Cleaning_.Up_.Flag_.Code%29" class="tocviewlink" data-pltdoc="x">Cleaning Up Flag Code</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.More_.Functions_.Practice__.Cost_of_pens%29" class="tocviewlink" data-pltdoc="x">More Functions Practice:<span class="mywbr"> &nbsp;</span> Cost of pens</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Introduction_to_.Functions%29" class="tocsubseclink" data-pltdoc="x">Introduction to Functions</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Repeated_.Computations__.Flags_.Example%29" class="tocsubseclink" data-pltdoc="x">Repeated Computations:<span class="mywbr"> &nbsp;</span> Flags Example</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Defining_.Your_.Own_.Functions%29" class="tocsubseclink" data-pltdoc="x">Defining Your Own Functions</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Cleaning_.Up_.Flag_.Code%29" class="tocsubseclink" data-pltdoc="x">Cleaning Up Flag Code</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.More_.Functions_.Practice__.Cost_of_pens%29" class="tocsubseclink" data-pltdoc="x">More Functions Practice:<span class="mywbr"> &nbsp;</span> Cost of pens</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><h2><a name="(part._.Introduction_to_.Functions)"></a>Introduction to Functions</h2><p>Copyright (c) 2017 Kathi Fisler</p><p><span style="font-style: italic">This material goes with <a href="http://papl.cs.brown.edu/2017/From_Repeated_Expressions_to_Functions.html">From Repeated Expressions to Functions</a> from the textbook</span></p><h3>1<tt>&nbsp;</tt><a name="(part._.Repeated_.Computations__.Flags_.Example)"></a>Repeated Computations: Flags Example</h3><p>Consider programs to draw the flags of Armenia and Austria.  These
two countries have the same flag, just with different colors:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">armenia =</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">frame(</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(120, 30, "solid", "red"),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(120, 30, "solid", "blue"),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">rectangle(120, 30, "solid", "orange"))))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">austria =</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">frame(</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(120, 30, "solid", "red"),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(120, 30, "solid", "white"),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">rectangle(120, 30, "solid", "red"))))</span></p></td></tr></table></p><p>Rather than write this code twice, it would be nice to write the
common code only once, then just change the colors to generate each
flag.  With what we&rsquo;ve learned so far, we might do this as follows:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">top = "red"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">middle = "blue"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">bot = "orange"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">flag=</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">frame(</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(120, 30, "solid", top),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(120, 30, "solid", middle),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">rectangle(120, 30, "solid", bot))))</span></p></td></tr></table></p><p>This is unsatisfying, however &ndash; what if we were trying to create an
image that included both flags at the same time?  We can only put one
defintion of each color in the Pyret dictionary, so there is no way to
change the colors to generate another flag within the same run of the
program.</p><p>Wouldn&rsquo;t it be nice to be able to do something similar for the flags?
It would be nice to just write the following:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">armenia = three-stripe-flag("red", "blue", "orange")</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">austria = three-stripe-flag("red", "white", "red")</span></p></td></tr></table></p><p>This is precisely what you are about to learn how to do.  You are
going to learn how to add your own operators to Pyret.</p><h3>2<tt>&nbsp;</tt><a name="(part._.Defining_.Your_.Own_.Functions)"></a>Defining Your Own Functions</h3><p>(See the textbook or lecture capture for details on what a function is &ndash; what
follows is just summarizing the code from class)</p><p>Here is</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun three-stripe-flag(top, middle, bot):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">doc: "produce image of flag with three equal-sized horizontal stripes"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">frame(</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(120, 30, "solid", top),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(120, 30, "solid", middle),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">rectangle(120, 30, "solid", bot))))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></p><p>With this, the two desired flag expressions work fine.</p><p>What if we make a mistake, and try to use the function as follows:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">three-stripe-flag(50, "blue", "red")</span></p></td></tr></table></p><p>What do you think should happen?  50 is not a string (much less a string naming a
color).  Pyret will give an error on one of the rectangle commands
(we&rsquo;ll see which one in particular in a little while). The point is
that the error comes up inside the computation that creates the flag.</p><p>It would be much more helpful if we got the error when we tried to use
<span class="stt">three-stripe-flag</span>.  We can annotate the inputs with
<span style="font-style: italic">types</span> telling Pyret what kind of data the function expects to
receive:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun three-stripe-flag(top-color :: String, mid-color :: String, bot-color :: String):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">doc: "produce image of flag with three equal-sized horizontal stripes"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">frame(</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(120, 30, "solid", top-color),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(120, 30, "solid", mid-color),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">rectangle(120, 30, "solid", bot-color))))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></p><p>If you try the erroneous call again, you&rsquo;ll see that the location
where the error is reported has changed.</p><h3>3<tt>&nbsp;</tt><a name="(part._.Cleaning_.Up_.Flag_.Code)"></a>Cleaning Up Flag Code</h3><p>We started again with the function from last class to make three-stripe flags.</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun three-stripe-flag(top :: String, middle :: String, bot :: String):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">doc: "produce image of flag with three equal height horizontal stripes"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">frame(</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(120, 30, "solid", top),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(120, 30, "solid", middle),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">rectangle(120, 30, "solid", bot))))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">armenia = three-stripe-flag("red", "blue", "orange")</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">austria = three-stripe-flag("red", "white", "red")</span></p></td></tr></table></p><p>We observed that someone might want to make flags of different sizes,
but that flags also have a height/width ratio that should be
preserved. This suggests taking one dimension (we chose width) as an
input and computing the other:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun three-stripe-flag(top :: String, middle :: String, bot :: String,</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">width :: Number):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">doc: "produce image of flag with three equal height horizontal stripes"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">frame(</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(width, width * 0.25, "solid", top),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(width, width * 0.25, "solid", middle),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">rectangle(width, width * 0.25, "solid", bot))))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">armenia = three-stripe-flag("red", "blue", "orange", 120)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">austria = three-stripe-flag("red", "white", "red", 120)</span></p></td></tr></table></p><p>We talked about how this code uses the same ratio three times, so it
should really be a constant:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">RATIO = 0.25</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun three-stripe-flag(top :: String, middle :: String, bot :: String,</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">width :: Number):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">doc: "produce image of flag with three equal height horizontal stripes"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">frame(</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(width, width * RATIO, "solid", top),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(width, width * RATIO, "solid", middle),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">rectangle(width, width * RATIO, "solid", bot))))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">armenia = three-stripe-flag("red", "blue", "orange", 120)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">austria = three-stripe-flag("red", "white", "red", 120)</span></p></td></tr></table></p><p>Then we talked about two other modifications: we might want to do the
<span class="stt">width * RATIO</span> computation only once, storing the result in a
variable:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">RATIO = 0.25</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun three-stripe-flag(top :: String, middle :: String, bot :: String,</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">width :: Number):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">doc: "produce image of flag with three equal height horizontal</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">stripes"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">height = width * RATIO</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">frame(</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(width, height, "solid", top),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(width, height, "solid", middle),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">rectangle(width, height, "solid", bot))))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></p><p>Alternatively, we could create a helper function to do the height
computation:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">RATIO = 0.25</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun compute-height(width :: Number):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">doc: "Compute height from width based on ratio</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">width * RATIO</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun three-stripe-flag(top :: String, middle :: String, bot :: String,</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">width :: Number):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">doc: "produce image of flag with three equal height horizontal</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">stripes"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">frame(</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(width, compute-height(width), "solid", top),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">above(rectangle(width, compute-height(width), "solid", middle),</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">rectangle(width, compute-height(width), "solid", bot))))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></p><p>The last version illustrates that you can create additional functions
as a way to name repeated intermediate computations.  These functions
are typically called <span style="font-style: italic">helper functions</span>.  In this specific case,
just naming the height computation is sufficient. Sometimes, however,
a helper function is useful for letting you name more complex
intermediate computations.</p><h3>4<tt>&nbsp;</tt><a name="(part._.More_.Functions_.Practice__.Cost_of_pens)"></a>More Functions Practice: Cost of pens</h3><p>Imagine that you are trying to compute the total cost of an order of
pens with slogans (or messages) printed on them.  Each pen costs 25
cents plus an additional 2 cents per character in the message (count
spaces as characters for now).</p><p>First, let&rsquo;s write two expressions that do this computation, just to
make sure we understand how it should work:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># if ordering 3 pens that say "wow"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">3 * (0.25 + (string-length("wow") * 0.02))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># if ordering 10 pens that say "smile"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">10 * (0.25 + (string-length("smile") * 0.02))</span></p></td></tr></table></p><p>Having a clear idea of the computation you want to do makes it much
easier to write a function to do it.  How do we figure out a function
that would correspond to these two expressions?  We find the places
where the two functions are different and replace each spot of
difference with a unique descriptive name.  These names become the
parameters of the function.</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun pen-cost(num-pens :: Number, message :: String):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">num-pens * (0.25 + (string-length(message) * 0.02))</span></p></td></tr></table></p><p>The initial expressions we developed give rise to our examples.  When
you write the expected results of the examples, you can either write
the final answer or the expression that computed it (each can be
useful in certain cases).  Here&rsquo;s the final function:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun pen-cost(num-pens :: Number, message :: String):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">doc: "total cost for pens, each 25 cents plus 2 cents per message character"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">num-pens * (0.25 + (string-length(message) * 0.02))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">where:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">pen-cost(3, "wow") is 0.87</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">pen-cost(10, "smile") is 10 * (0.25 + (string-length("smile") * 0.02))</span></p></td></tr></table></p><p>What are other good cases to check here?  Ordering 0 pens and pens with
empty messages are both good cases to check.  You don&rsquo;t have to check
negative numbers of pens or messages that aren&rsquo;t strings though &ndash;
those fall outside the expected "contract" of the function (we&rsquo;ll
discuss how to properly handle the negatives later).</p><p>Once you are comfortable with the idea of writing functions, you would skip
this circle-and-label step, and just jump directly to writing the
expression with the parameters in place.  Use the circle-and-label
technique as needed to get yourself to that point.</p></div></div><div id="contextindicator">&nbsp;</div></body></html>