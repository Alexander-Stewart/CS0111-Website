<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Class summary: Introduction to Tables</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="notes.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-custom.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Class summary:<span class="mywbr"> &nbsp;</span> Introduction to Tables</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Tabular_.Data%29" class="tocviewlink" data-pltdoc="x">Tabular Data</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Class_summary__.Introduction_to_.Tables%29" class="tocsubseclink" data-pltdoc="x">Class summary:<span class="mywbr"> &nbsp;</span> Introduction to Tables</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Tabular_.Data%29" class="tocsubseclink" data-pltdoc="x">Tabular Data</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Summary_of_.Table_.Operations_.So_.Far%29" class="tocsubseclink" data-pltdoc="x">Summary of Table Operations So Far</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><h2><a name="(part._.Class_summary__.Introduction_to_.Tables)"></a>Class summary: Introduction to Tables</h2><p>Copyright (c) 2017 Kathi Fisler</p><p>Try a new problem today: managing a gradebook.  I want to write
programs to help me do various computations over students&rsquo; grades on
exams (average scores on an exam, average scores across exams,
improvement, histograms of scores, etc).  Let&rsquo;s start with two students:</p><p>Allie got 85 on exam1 and 90 on exam2
  Carl got 75 on exam1 and 60 on exam2</p><p>Let&rsquo;s say I want to have a function that lets me lookup the grade
that a specific student got on a specific exam. How might we write
that code with what we have now?</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun lookup-grade(student :: String, asgn :: String) -&gt; Number:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">doc: "Return grade of a given student on a given exam"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if (student == "Allie"):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if (asgn == "exam1"):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">85</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else if (asgn == "exam2"):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">90</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">raise("No such assignment")</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">else if (student == "Carl"):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if (asgn == "exam1"):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">75</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else if (asgn == "exam2"):</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">60</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">raise("No such assignment")</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">else: raise("No such student")</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></p><p>(the <span class="stt">raise</span> operator is how we have Pyret programs generate
errors in the case of unexpected or invalid inputs.)</p><p>This code should bother us for several reasons:</p><ul><li><p>It won&rsquo;t scale to many assignments or large numbers of students.</p></li><li><p>This function only looks up grades &ndash; if we want other gradebook
operations (like averaging grades), will we have to repeat all of this
data in another function?</p></li><li><p>The code treats the pieces of data about an individual student
as separate pieces of information, rather than as a collection of
related information.</p></li></ul><div class="csTip"><p><span style="font-weight: bold">Key idea in CS</span>: As a general rule of thumb, we want ways to keep related data
together. We also want to keep data separate from computations that
process the data (so we can reuse the data).</p></div><p>As we discussed this setup, some students raised the idea of
spreadsheets.  Spreadsheets are good for grouping data into rows and
columns &ndash; with a spreadsheet, we could keep all of a student&rsquo;s data
together in a row, while keeping all data about a particular
assignment together in a column.  If only we had a spreadsheet!</p><p>Actually, Pyret has a data type that gives us the structure of a
spreadsheet (but without all the built-in formulas).  It&rsquo;s called a
<span class="stt">Table</span>.</p><h3>1<tt>&nbsp;</tt><a name="(part._.Tabular_.Data)"></a>Tabular Data</h3><p>Here&rsquo;s our gradebook written in a Pyret table:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">include tables</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">include shared-gdrive("cs111-2018.arr", "1XxbD-eg5BAYuufv6mLmEllyg28IR7HeX")</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">gradebook = table: name, SNC, exam1, exam2</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">row: "Allie", false, 85, 90</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">row: "Carl",</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">false, 75, 60</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">row: "Elan", true, 95, 63</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">row: "Lavon", false, 87, 88</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">row: "Nunu", true, 70, 0</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></p><p>What computations might you want to do with this table?</p><div class="itemtight"><ul><li><p>compute course grades</p></li><li><p>get histogram of performance on each exam</p></li><li><p>look at delta from first exam to second exam</p></li><li><p>check whether SNC or letter-grade students did better on exam2</p></li><li><p>get names of students who did poorly on the first exam</p></li><li><p>etc</p></li></ul></div><p>To do these analyses, need to be able to do operations on tables.
What sort of operations do you need?</p><div class="itemtight"><ul><li><p>filter out some rows (to look at only low grades)</p></li><li><p>re-order the rows (to see high or low scores first)</p></li><li><p>perform computations based on particular some columns (i.e., SNC and exam2)</p></li><li><p>add a column with the overall course grade</p></li></ul></div><p>Our first task was to learn how to do these computations in
Pyret. Here are examples of these computations:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#----------------------------------------------</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># order the rows by descending values on exam1</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># false means sort descending; true would sort ascending</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">sort-by(gradebook, "exam1", false)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#----------------------------------------------</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># keep only those rows in which the SNC column contains true</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># to do this, we need a function that takes a row and produces</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">a boolean indicating whether to keep the row.</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># the notation r["SNC"] extracts the SNC value from the given row.</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># you don't know what rows are yet, but all you need for now is the</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># ability to look up values in their columns.</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun taking-snc(r :: Row) -&gt; Boolean:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">doc: "get the value in the given row's SNC column"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">r["SNC"]</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># filter-by produces a table with the rows from the given gradebook</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># for which the given function returns true.</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">filter-by(gradebook, taking-snc)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#----------------------------------------------</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># keep only those rows in which the SNC column contains false</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun not-taking-snc(r :: Row) -&gt; Boolean:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">not(r["SNC"])</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">filter-by(gradebook, not-taking-snc)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#----------------------------------------------</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># keep those students whose grades dropped from exam1 to exam2</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># this shows how to do a computation over two values in a row</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">fun exam2-lower(r :: Row) -&gt; Boolean:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">r["exam1"] &gt; r["exam2"]</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">filter-by(gradebook, exam2-lower)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># extract the first row from a table</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">gradebook.row-n(0)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># this . notation means "dig into" the table.</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">It's what we'll use</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># when we have to pull info out of a table.</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># extract the exam1 value from the first row of the table</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">gradebook.row-n(0)["exam1"]</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr></table></p><p>Some notes:</p><ul><li><p>We not yet writing where blocks for these functions because we
haven&rsquo;t shown you how to create rows. Today&rsquo;s goal is just to get you
some intuition about table operations.</p></li><li><p>Why are column names in strings when they appear to be given as
names in the table notation?  In other words, why can&rsquo;t we write
<span class="stt">r[SNC]</span> without the quotation marks?</p><p>If Pyret tries to run <span class="stt">r[SNC]</span>, it will look for a definition of
the form <span class="stt">SNC = &lt;expression&gt;</span> in the file.  No such definition
exists, so Pyret will report an error.  We therefore turn column names
into strings and let the table/row operations (filter-by, sort-by,
etc) find the columns with the given strings as names.</p></li></ul><h4>1.1<tt>&nbsp;</tt><a name="(part._.Summary_of_.Table_.Operations_.So_.Far)"></a>Summary of Table Operations So Far</h4><p>As a summary, here are the functions shown in these examples (you
won&rsquo;t find them in the Pyret documentation &ndash; you need to use
<a href="http://cs.brown.edu/courses/csci0111/docs/tables-funs-docs.html">our documentation of table operations</a> instead:</p><div class="priorProg"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">filter-by :: (t :: Table, (test :: Row-&gt;Boolean)) -&gt; Table</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">sort-by :: (t :: Table, col :: String, ascending :: Boolean) -&gt; Table</span></p></td></tr></table><p>the notation <span class="stt">row["colname"]</span> extracts the value stored in the named
column in the given row</p></div><p>What is the key takeaway from this segment?</p><div class="csTip"><p><span style="font-weight: bold">Key idea in CS</span>: Once data are made up of smaller pieces of data, we want to organize
the data to make it easier to maintain and process.  Tables are good
for data about multiple entities, each of which has the same attributes.</p></div></div></div><div id="contextindicator">&nbsp;</div></body></html>