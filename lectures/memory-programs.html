<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Class summary: Programming with Memory</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="notes.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Class summary:<span class="mywbr"> &nbsp;</span> Programming with Memory</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Data_for_.Shared_.Bank_.Accounts%29" class="tocviewlink" data-pltdoc="x">Data for Shared Bank Accounts</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Creating_.Accounts__the_.Memory_.Dictionary_view%29" class="tocviewlink" data-pltdoc="x">Creating Accounts:<span class="mywbr"> &nbsp;</span> the Memory/<span class="mywbr"> &nbsp;</span>Dictionary view</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.How_do_.Lists_.Work_in_.Memory_%29" class="tocviewlink" data-pltdoc="x">How do Lists Work in Memory?</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Class_summary__.Programming_with_.Memory%29" class="tocsubseclink" data-pltdoc="x">Class summary:<span class="mywbr"> &nbsp;</span> Programming with Memory</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Data_for_.Shared_.Bank_.Accounts%29" class="tocsubseclink" data-pltdoc="x">Data for Shared Bank Accounts</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Creating_.Accounts__the_.Memory_.Dictionary_view%29" class="tocsubseclink" data-pltdoc="x">Creating Accounts:<span class="mywbr"> &nbsp;</span> the Memory/<span class="mywbr"> &nbsp;</span>Dictionary view</a></td></tr><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._.Create_a_single-owner_account%29" class="tocsubseclink" data-pltdoc="x">Create a single-<wbr></wbr>owner account</a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._.Create_a_jointly-managed_account%29" class="tocsubseclink" data-pltdoc="x">Create a jointly-<wbr></wbr>managed account</a></td></tr><tr><td><span class="tocsublinknumber">2.2.1<tt>&nbsp;</tt></span><a href="#%28part._.Version_1%29" class="tocsubseclink" data-pltdoc="x">Version 1</a></td></tr><tr><td><span class="tocsublinknumber">2.2.2<tt>&nbsp;</tt></span><a href="#%28part._.Version_2%29" class="tocsubseclink" data-pltdoc="x">Version 2</a></td></tr><tr><td><span class="tocsublinknumber">2.2.3<tt>&nbsp;</tt></span><a href="#%28part._.Version_3%29" class="tocsubseclink" data-pltdoc="x">Version 3</a></td></tr><tr><td><span class="tocsublinknumber">2.2.4<tt>&nbsp;</tt></span><a href="#%28part._.Version_4%29" class="tocsubseclink" data-pltdoc="x">Version 4</a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#%28part._.Making_a_.Deposit_to_a_.Joint_.Account%29" class="tocsubseclink" data-pltdoc="x">Making a Deposit to a Joint Account</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.How_do_.Lists_.Work_in_.Memory_%29" class="tocsubseclink" data-pltdoc="x">How do Lists Work in Memory?</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><h2><a name="(part._.Class_summary__.Programming_with_.Memory)"></a>Class summary: Programming with Memory</h2><p>Copyright (c) 2017 Kathi Fisler</p><p>The previous lecture motivated the need for tracking memory separately
from the dictionary. There were a lot of details to keep straight in
the previous lecture, and you may have lost track of how we got into
those details in the first place.</p><p>So let&rsquo;s step back before we move on. Why are we doing this?</p><p>Ultimately, this course is trying to teach you how to work with
various kinds of information that might show up in a real project.  Up
until now, we&rsquo;ve focused on the structure of information (tables vs
lists vs datatypes/dataclasses) and how to write programs to process
those structures.</p><p>But now, we&rsquo;re starting to consider an additional question: does any
of our data need to be shared across different parts of the program,
such that multiple parts of the program might need to change the data
and see the changes?</p><p>To talk about sharing and changes, it helps to talk about memory,
using common memory locations to indicate data that is shared across
different parts of a program.</p><p>Let&rsquo;s start with a program-based example, then go back down to the
level of memory.</p><h3>1<tt>&nbsp;</tt><a name="(part._.Data_for_.Shared_.Bank_.Accounts)"></a>Data for Shared Bank Accounts</h3><p>Imagine that you need to define data structures for managing bank
customers and their accounts. The bank wants to allow multiple
customers to manage the same account (meaning each person deposits to
or withdraws from the same shared balance).</p><p>How might you set up the data about customers and their accounts?  To
keep things simple, we&rsquo;ll limit the information about customers to
their names (leaving out phone numbers, etc), and information about
accounts to their balances (leaving out interest rates, etc).</p><p>In a full banking system, we might want to allow customers to be part
of multiple accounts as well.  This would suggest the following data
structure:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@dataclass</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">class Account:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">id : int</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">balance : int</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">owners : lst</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># of accounts</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@dataclass</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">class Customer:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">name : str</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">accts : lst</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># of Accounts</span></p></td></tr></table></p><p>You can have these kinds of circular connections, in which customers
connect to accounts which connect to customers.  In the interest of
letting us focus on basic sharing and memory, however, let&rsquo;s simplify
our data as follows: accounts don&rsquo;t track who their customers are, and
each customer has only one account:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@dataclass</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">class Account:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">id : int</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">balance : int</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@dataclass</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">class Customer:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">name : str</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">acct : Account</span></p></td></tr></table></p><p>[Note: you could consider making the acct field hold an id number
instead of an Account, but this is back to the same point we made when
linking people into ancestry trees &ndash; direct references to other
values, rather than going through names or id numbers, speeds up our
access to related data.]</p><h3>2<tt>&nbsp;</tt><a name="(part._.Creating_.Accounts__the_.Memory_.Dictionary_view)"></a>Creating Accounts: the Memory/Dictionary view</h3><p><span style="font-style: italic">This section works through the handout from lecture.</span></p><h4>2.1<tt>&nbsp;</tt><a name="(part._.Create_a_single-owner_account)"></a>Create a single-owner account</h4><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># Tina is a new Customer who opens a solo account with $100</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">t_cust = Customer("Tina", Account(1, 100))</span></p></td></tr></table></p><div class="highlight"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">Dictionary</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Memory</span></p></td></tr><tr><td><p><span class="stt">-----------------------------------------------------------------------</span></p></td></tr><tr><td><p><span class="stt">t_cust -&gt; (loc 1015)</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(loc 1015) -&gt; Customer("Tina", Account(1, 100))</span></p></td></tr></table></div><p>Tina makes a deposit:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">t_cust.acct.balance = t_cust.acct.balance + 50</span></p></td></tr></table></p><p>The assignment is to a field, so we update the balance in memory.</p><div class="highlight"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">Dictionary</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Memory</span></p></td></tr><tr><td><p><span class="stt">-----------------------------------------------------------------------</span></p></td></tr><tr><td><p><span class="stt">t_cust -&gt; (loc 1015)</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(loc 1015) -&gt; Customer("Tina", Account(1, 150))</span></p></td></tr></table></div><h4>2.2<tt>&nbsp;</tt><a name="(part._.Create_a_jointly-managed_account)"></a>Create a jointly-managed account</h4><p>Maria and Jorge are new Customers who want to share an Account.
Sharing means that either of them can make deposits or withdrawals
  and both will see the results</p><p>Here are four possible proposals for how to set this up.
What are the strengths/weaknesses of each?
What do the memory diagrams look like for each?</p><h5>2.2.1<tt>&nbsp;</tt><a name="(part._.Version_1)"></a>Version 1</h5><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">m_cust1 = Customer("Maria", Account(2, 250))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">j_cust1 = Customer("Jorge", Account(2, 250))</span></p></td></tr></table></p><div class="highlight"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">Dictionary</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Memory</span></p></td></tr><tr><td><p><span class="stt">-----------------------------------------------------------------------</span></p></td></tr><tr><td><p><span class="stt">m_cust1 -&gt; (loc 1016)</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(loc 1016) -&gt; Customer("Maria", Account(2, 150))</span></p></td></tr><tr><td><p><span class="stt">j_cust1 -&gt; (loc 1016)</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(loc 1016) -&gt; Customer("Jorge", Account(2, 150))</span></p></td></tr></table></div><p>This doesn&rsquo;t create a shared account, so we should reject version 1.</p><h5>2.2.2<tt>&nbsp;</tt><a name="(part._.Version_2)"></a>Version 2</h5><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">m_cust2 = Customer("Maria", Account(2, 250))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">j_cust2 = Customer("Jorge", m_cust2.acct)</span></p></td></tr></table></p><div class="highlight"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">Dictionary</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Memory</span></p></td></tr><tr><td><p><span class="stt">-----------------------------------------------------------------------</span></p></td></tr><tr><td><p><span class="stt">m_cust2 -&gt; (loc 1016)</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(loc 1016) -&gt; Customer("Maria", Account(2, 150))</span></p></td></tr><tr><td><p><span class="stt">j_cust2 -&gt; (loc 1017)</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(loc 1017) -&gt; Customer("Jorge", __________)</span></p></td></tr></table></div><p>What do we put in the memory spot for Jorge&rsquo;s account? We want to
refer to the same Account as Maria has. But we refer to shared data
through common memory locations, and there is no separate location for
Maria&rsquo;s account.</p><p>The problem here is that we violated one of the rules we originally
set up for putting data in memory:</p><p><span style="font-weight: bold">Every datum with components gets a location in memory</span></p><p>Here, we tucked the account into the Maria Customer.  That was
wrong. We should have done the following:</p><div class="highlight"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">Dictionary</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Memory</span></p></td></tr><tr><td><p><span class="stt">-----------------------------------------------------------------------</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(loc 1016) -&gt; Account(2, 150)</span></p></td></tr><tr><td><p><span class="stt">m_cust2 -&gt; (loc 1017)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(loc 1017) -&gt; Customer("Maria", (loc 1016))</span></p></td></tr><tr><td><p><span class="stt">j_cust2 -&gt; (loc 1018)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(loc 1018) -&gt; Customer("Jorge", (loc 1016))</span></p></td></tr></table></div><p>Note that there is no name in the dictionary that directly maps to the
account (see Version 3 for that). But you can get to that account
through <span class="stt">m_cust2.acct</span>, which is how version 2 sets up the
account reference for Jorge.</p><p>So version 2 works. Whether you like this approach of using Maria&rsquo;s
account info to set up Jorge&rsquo;s is largely a stylistic preference
(compared to version 3).</p><h5>2.2.3<tt>&nbsp;</tt><a name="(part._.Version_3)"></a>Version 3</h5><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">new_acct = Account(2, 250)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">m_cust3 = Customer("Maria", new_acct)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">j_cust3 = Customer("Jorge", new_acct)</span></p></td></tr></table></p><div class="highlight"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">Dictionary</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Memory</span></p></td></tr><tr><td><p><span class="stt">-----------------------------------------------------------------------</span></p></td></tr><tr><td><p><span class="stt">new_acct</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(loc 1016) -&gt; Account(2, 150)</span></p></td></tr><tr><td><p><span class="stt">m_cust2 -&gt; (loc 1017)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(loc 1017) -&gt; Customer("Maria", (loc 1016))</span></p></td></tr><tr><td><p><span class="stt">j_cust2 -&gt; (loc 1018)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(loc 1018) -&gt; Customer("Jorge", (loc 1016))</span></p></td></tr></table></div><p>This is similar to version 2, except this time we have a name
(<span class="stt">new_acct</span>) through which to directly access the account.</p><p>Note here that we put <span class="stt">(loc 1016)</span> in memory rather than the name
<span class="stt">new_acct</span>. While the dictionary entries refer to memory, <span style="font-weight: bold">memory
entries never refer to the dictionary</span>. This is crucial, since
reassigning names may change dictionary entries. Once data connections
are set up within memory, they can only be changed by updating data
through fields (or operations on lists).</p><h5>2.2.4<tt>&nbsp;</tt><a name="(part._.Version_4)"></a>Version 4</h5><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">init_bal = 250</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">m_cust4 = Customer("Maria", Account(2, init_bal))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">j_cust4 = Customer("Jorge", Account(2, init_bal))</span></p></td></tr></table></p><div class="highlight"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">Dictionary</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Memory</span></p></td></tr><tr><td><p><span class="stt">-----------------------------------------------------------------------</span></p></td></tr><tr><td><p><span class="stt">init_bal -&gt; 250</span></p></td></tr><tr><td><p><span class="stt">m_cust2 -&gt; (loc 1017)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(loc 1017) -&gt; Customer("Maria", 250)</span></p></td></tr><tr><td><p><span class="stt">j_cust2 -&gt; (loc 1018)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(loc 1018) -&gt; Customer("Jorge", 250)</span></p></td></tr></table></div><p>Here, since the <span class="stt">init_bal</span> is just a number, it lives entirely
within the dictionary. When we set up the Accounts, the number gets
copied into each account (remember, memory never refers back to the
dictionary). There is no shared memory location for the balance, so
this version does not work.</p><h4>2.3<tt>&nbsp;</tt><a name="(part._.Making_a_.Deposit_to_a_.Joint_.Account)"></a>Making a Deposit to a Joint Account</h4><p>Let&rsquo;s assume we set up the accounts with version 3.  Jorge wants to
make a $100 deposit. Which of the following lines of code are appropriate?</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">1. new_acct = Account(2, new_acct.balance + 100)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">2. new_acct.balance = new_acct.balance + 100</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">3. j_cust3.acct = Account(2, new_acct.balance + 100)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">4. j_cust3.acct.balance = new_acct.balance + 100</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">5. j_cust3.acct.balance = j_cust3.acct.balance + 100</span></p></td></tr></table></p><p>For the deposit to be visible to Maria, we have to modify the account
that Maria shares with Jorge. We can&rsquo;t make a new account, so lines 1
and 3 are not appropriate.</p><p>Whether lines 2 and 4 work depends on whether <span class="stt">new_acct</span> still
refers to the memory location of Jorge&rsquo;s (and Maria&rsquo;s) account.  If it
does, both lines work (though the intent isn&rsquo;t as clear with line 2,
which doesn&rsquo;t indicate that the goal is to update Jorge&rsquo;s
balance). But if <span class="stt">new_acct</span> now refers elsewhere, neither line
works: line 2 puts the adjusted balance in the wrong account, while
line 4 may compute the new balance from the wrong existing balance.</p><p>Line 5 works fine.</p><h3>3<tt>&nbsp;</tt><a name="(part._.How_do_.Lists_.Work_in_.Memory_)"></a>How do Lists Work in Memory?</h3><p>Now let&rsquo;s make a list of customers:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">all_accts = [t_cust, j_cust3, m_cust3]</span></p></td></tr></table></p><p>What happens to memory and the dictionary now?  We add a new
dictionary entry for <span class="stt">all_accts</span>, mapping to a new memory
location containing the list of memory locations for the three items:</p><div class="highlight"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">Dictionary</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Memory</span></p></td></tr><tr><td><p><span class="stt">-----------------------------------------------------------------------</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(loc 1014) -&gt; Account(1, 100)</span></p></td></tr><tr><td><p><span class="stt">t_cust -&gt; (loc 1015)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(loc 1015) -&gt; Customer("Tina", (loc 1014))</span></p></td></tr><tr><td><p><span class="stt">new_acct</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(loc 1016) -&gt; Account(2, 150)</span></p></td></tr><tr><td><p><span class="stt">m_cust3 -&gt; (loc 1017)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(loc 1017) -&gt; Customer("Maria", (loc 1016))</span></p></td></tr><tr><td><p><span class="stt">j_cust3 -&gt; (loc 1018)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(loc 1018) -&gt; Customer("Jorge", (loc 1016))</span></p></td></tr><tr><td><p><span class="stt">all_accts -&gt; (loc 1019)</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(loc 1019) -&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[(loc 1015), (loc 1017), (loc 1018)</span></p></td></tr></table></div><p>When you write something like <span class="stt">all_accts.append</span>, the list gets modified
in memory to include the new contents.</p></div></div><div id="contextindicator">&nbsp;</div></body></html>